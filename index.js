"use strict";var _express=_interopRequireDefault(require("express"));var _promises=require("stream/promises");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}const app=(0,_express.default)();app.disable("x-powered-by");app.use((req,res,next)=>{res.set("Access-Control-Allow-Origin","*");if(req.method==="OPTIONS"){res.set("Access-Control-Allow-Methods","GET, POST, OPTIONS");res.set("Access-Control-Allow-Headers","Content-Type");res.sendStatus(204)}else{next()}});app.get("/",(_,res)=>{res.sendStatus(200)});app.use("*",_express.default.json(),async(req,res)=>{try{const{url,method,headers,body}=req.body;if(!url)throw new Error("missing url");if(!method)throw new Error("missing method");const response=await fetch(url,{method,...(headers&&{headers}),...(body&&{body})});await(0,_promises.pipeline)(response.body,res)}catch{res.sendStatus(400)}});app.listen(process.env.PORT);